# EZ365 Wordpress Site

## Saving the Site for Developement

The database needs to be saved to the file folder
1. Log into production wordpress (https://ex365.io/wp-admin)
2. Open the WP-phpMyAdmin plugin in the sidebar
3. Click `Enter phpMyAdmin`
4. Click on the database named `ez365` and click on the `Export` tab
5. Leave the default settings and click `Go` to export a sql file
6. Open the file in a basic text editor
7. In wordpress, click the WPide plugin in the sidebar
8. Use the file navigator on the right panel to edit the db.sql file and paste in the contents from the file downloaded from phpMyAdmin and click `Save`

The site's files need to be pushed to git
1. Log into the server using SSH
2. Navigate to the public html folder `cd ~/public_html`
3. Add all and any new changes to git master branch `git add -A`
4. Commit the changes with a descriptive message `git commit -am"added a new plugin and updated some page colours"`
5. Push the changes to the repository `git push`

The site can now be pulled to the developement environment using git and the database populated from the db.sql file

# Deploying

After having made changes locally or in a test environment, the database changes need to be saved
1. The sql file needs to be exported from phpmyadmin and saved in the root folder as db.sql
2. Find and replace all instances of the `http:localhost:<port_number>` or `https://test_env_url` with `https://ez365.io` in the db.sql file
3. Ensure all the instances of the database name are `ez365_wp` as some hosts will have some autogenerated string after the desired database name.
4. Save the file

All the changes need to be pushed to git
1. Navigate to the root folder of the project in a terminal
2. Add all files to git `git add -A`
3. Commit the changes with a descriptive message `git commit -am"added 2 new plugins and updated some more page colours"`
4. Push the changes to the repository `git push`

Pull the changes to the production environment
1. Log into the server using SSH
2. Navigate to the public html folder `cd ~/public_html`
3. Pull all new changes from the repository `git pull`

Attempt to log into wordpress. Based on the nature of the changes, the site may not work after pulling the changes from the git repository, although pulling the code changes before updating the database is more likely to keep the site live.

If the site is functional
1. Log into production wordpress (https://ex365.io/wp-admin)
2. Open the WP-phpMyAdmin plugin in the sidebar
3. Click `Enter phpMyAdmin` and keep this tab ready
  * In wordpress, click the WPide plugin in the sidebar
  * Use the file navigator on the right panel to open the db.sql
  * Copy the file contents
4. Back in phpMyAdmin, click on the database named `ez365` and click on the `SQL` tab
5. Paste the copied sql code into the textarea and click `Go`

If the site is not functional phpMyAdmin and the site files can be accessed from the web host provider and the same general steps as above need to be taken

The site now has all the changes as developed in the separate environment
